{% extends "base.html" %}

{% block title %}Mes demandes{% endblock %}

{% block content %}
<div class="container">
    <h1>üì® Mes demandes d‚ÄôOID</h1>
    <p>Voici l‚Äôhistorique de toutes vos demandes d‚Äôajout d‚ÄôOID.</p>

    <table>
        <thead>
            <tr>
                <th>Type de demande</th>
                <th>D√©tails</th>
                <th>Date</th>
                <th>Status</th>
            </tr>
        </thead>

        <tbody>
        {% for d in demandes %}
            <tr>
                <!-- TYPE DE DEMANDE -->
                <td>
                    {% if d.action_type == "NEW_OID" %}
                        ‚ûï Ajout d‚ÄôOID
                    {% elif d.action_type == "DELETE_OID" %}
                        ‚ùå Suppression d‚ÄôOID
                    {% elif d.action_type == "DELETE_EQ" %}
                        üñ•Ô∏è Suppression √©quipement
                    {% elif d.action_type == "NEW_TEMPLATE" %}
                        üìò Nouvelle template
                    {% else %}
                        -
                    {% endif %}
                </td>

                <!-- D√âTAILS -->
                <td>
                    {% if d.action_type == "NEW_OID" %}
                        <strong>{{ d.oid_nom }}</strong> ‚Äî {{ d.oid_identifiant }}
                    {% elif d.action_type == "DELETE_OID" %}
                        <strong>{{ d.oid_nom_delete }}</strong> ‚Äî {{ d.oid_identifiant_delete }}
                    {% elif d.action_type == "DELETE_EQ" %}
                        <strong>{{ d.equipement_nom }}</strong> ‚Äî {{ d.equipement_ip }}
                    {% elif d.action_type == "NEW_TEMPLATE" %}
                        <strong>{{ d.template_nom }}</strong>
                    {% else %}
                        -
                    {% endif %}
                </td>

                <!-- DATE -->
                <td>{{ d.demande_date }}</td>

                <!-- STATUT -->
                <td>
                    {% if d.validation_status == "PENDING" %}
                        <span class="badge pending">‚è≥ En attente</span>
                    {% elif d.validation_status == "APPROVED" %}
                        <span class="badge approved">‚úî Accept√©</span>
                    {% elif d.validation_status == "REJECTED" %}
                        <span class="badge rejected">‚úò Refus√©</span>
                    {% else %}
                        -
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
        </tbody>

    </table>


    <a href="{{ url_for('ajouter_oid') }}" class="btn">‚Ü©Ô∏è Retour</a>
</div>

<style>
.container {
    max-width: 900px;
    margin: 40px auto;
    background: #fff;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}
th {
    background-color: #1f3b73;
    color: white;
    padding: 10px;
}
td {
    padding: 10px;
    border-bottom: 1px solid #ddd;
}

.badge {
    display: inline-block;
    min-width: 110px;        /* garantit la m√™me taille visuelle */
    text-align: center;
    padding: 8px 12px;
    border-radius: 8px;
    color: white;
    font-weight: bold;
    font-size: 14px;
}
.badge.pending { background: #e89b00; }     /* orange plus satur√© */
.badge.approved { background: #1e9b32; }    /* vert modernis√© */
.badge.rejected { background: #c02323; }    /* rouge plus net */

.no-data {
    text-align: center;
    color: #777;
    padding: 15px;
}

.btn {
    display: inline-block;
    margin-top: 20px;
    background-color: #4A6785;
    color: white;
    padding: 10px 15px;
    border-radius: 6px;
    text-decoration: none;
}
.btn:hover {
    background-color: #39536a;
}
</style>
{% endblock %}
